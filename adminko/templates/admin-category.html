{% extends "baselayout.html" %}

{% block body %}
    <div class="cnt-menu">
        <div class="cnt-menu-header">
            <span>Каталог товаров:</span>            
        </div>
        <div class="cnt-menu-cnt">           
            <nav>      
                {% for pcategory in user.categories %}                
                <div style="width:100%;height:30px;margin:10px 0">
                    <span style="float:left;">{{ pcategory.name }}</span>
                    <div style="float:right">
                        <a style="display:block;margin-right:5px;float:left;height:26px;width:26px;padding:2px;" href="{{ url_for('admin_category', categoryId=pcategory.id ) }}">
                            <img style="height:22px;width:22px;" src="{{ url_for('static', filename='icons/edit.png') }}">
                        </a>
                        <a style="display:block;float:left;height:26px;width:26px;padding:2px;" href="{{ url_for('admin_category', categoryId=pcategory.id, isDelete=1) }}">
                            <img style="height:22px;width:22px;" src="{{ url_for('static', filename='icons/remove.png') }}">
                        </a>
                    </div>
                </div>
                {% endfor %}            
            </nav>
            <a href="{{ url_for('admin_category') }}">Новая категория</a>
        </div>
    </div>

    <div class="cnt-main">
        <form style="width:400px;" {% if not category %}
                action="{{ url_for('admin_category') }}"
            {% elif not isDelete %}
                action="{{ url_for('admin_category', categoryId=category.id) }}"
            {% else %}
                action="{{ url_for('admin_category', categoryId=category.id, isDelete=1) }}"
            {% endif %} method="POST">
            {% if isDelete %}
                <p style="text-align:center;">Вы действительно хотите удалить категорию <strong>{{ category.name }}</strong>
                    и связанные с ней товары?</p>
            {% else %}                
                <dl>
                    <dt>Категория:</dt>
                    <dd><input type="text" name="name" value="{{ category.name }}"></input></dd>
                </dl>
            {% endif %}
            <div style="float:right">
                <button type="submit">
                    {% if not category  %}
                        Добавить
                    {% elif not isDelete %}
                        Редактировать
                    {% else %}
                        Удалить
                    {% endif %}                
                </button>
                <a href="{{ url_for('admin_category') }}">
                    <button type="button">Отмена</button>
                </a>
            </div>
        </form>
    </div> <!-- cnt-main -->        
{% endblock body %}